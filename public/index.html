<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>CO HAIR æ–‡æ¡ˆç”Ÿæˆå™¨</title>
  <style>
    body { font-family: sans-serif; padding: 20px; background: #f6f6f6; }
    h1 { color: #333; text-align: center; }
    .container { background: white; padding: 20px; border-radius: 8px; max-width: 500px; margin: auto; }
    button, select, input { margin-top: 10px; padding: 10px; width: 100%; }
    .platforms img { width: 40px; margin: 10px; cursor: pointer; }
    .output-title { font-weight: bold; font-size: 18px; margin-top: 20px; }
    .output-body { white-space: pre-wrap; background: #eee; padding: 10px; border-radius: 6px; margin-top: 10px; }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ§  CO HAIR å¿«é€Ÿå‘æ–‡åŠ©æ‰‹</h1>
    
    <label>é€‰æ‹©è¯­è¨€é£æ ¼ï¼š</label>
    <select id="style">
      <option value="è‡ªç„¶çœŸè¯š">è‡ªç„¶çœŸè¯š</option>
      <option value="è½»å¤¸å¼ æç¬‘">è½»å¤¸å¼ æç¬‘</option>
      <option value="ä¸“ä¸šæ¨è">ä¸“ä¸šæ¨è</option>
    </select>

    <label>è¾“å…¥å…³é”®è¯ï¼ˆå¦‚ç†å‘å¸ˆåå­—ï¼‰ï¼š</label>
    <input type="text" id="keywords" placeholder="ä¾‹ï¼šyk æˆ– eilyn"/>

    <button onclick="generate()">ç”Ÿæˆæ–‡æ¡ˆ</button>

    <div class="output-title" id="title"></div>
    <div class="output-body" id="output"></div>

    <div class="platforms">
      <h3>ç‚¹å¹³å°å›¾æ ‡ç›´æ¥è·³è½¬å‘æ–‡ï¼š</h3>
      <a id="fb" target="_blank"><img src="https://cdn-icons-png.flaticon.com/512/124/124010.png" /></a>
      <a id="ig" target="_blank"><img src="https://cdn-icons-png.flaticon.com/512/2111/2111463.png" /></a>
      <a id="xhs" target="_blank"><img src="https://upload.wikimedia.org/wikipedia/commons/c/c1/XiaohongshuLOGO.png" /></a>
      <a id="tt" target="_blank"><img src="https://static.vecteezy.com/system/resources/previews/016/716/485/large_2x/tiktok-icon-free-png.png" /></a>
    </div>
  </div>

  <script>
    async function generate() {
      const style = document.getElementById("style").value;
      const keywords = document.getElementById("keywords").value;
      const titleEl = document.getElementById("title");
      const outputEl = document.getElementById("output");

      titleEl.textContent = "â³ æ­£åœ¨ç”Ÿæˆæ ‡é¢˜...";
      outputEl.textContent = "â³ æ­£åœ¨ç”Ÿæˆæ­£æ–‡æ–‡æ¡ˆ...";

      const res = await fetch("/api/generate", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ style, keywords })
      });

      const data = await res.json();

      if (data.title && data.result) {
        titleEl.textContent = data.title;
        outputEl.textContent = data.result;

        const encodedText = encodeURIComponent(`${data.title}\n${data.result}`);
        document.getElementById("fb").href = `https://www.facebook.com/sharer/sharer.php?u=&quote=${encodedText}`;
        document.getElementById("ig").href = `https://www.instagram.com/`;  // IG æ— é¢„å¡«åŠŸèƒ½
        document.getElementById("xhs").href = `https://www.xiaohongshu.com/`;  // å°çº¢ä¹¦æš‚æ— æ”¯æŒ
        document.getElementById("tt").href = `https://www.tiktok.com/upload?caption=${encodedText}`;
      } else {
        titleEl.textContent = "ç”Ÿæˆå¤±è´¥";
        outputEl.textContent = data.error || "æœªçŸ¥é”™è¯¯";
      }
    }
  </script>
</body>
</html>
